# Instrucciones de uso del Sistema Logístico Autónomo con Drones

## Configuración del entorno virtual e instalación de dependencias

1. Abre una terminal en la carpeta raíz del proyecto.
2. Crea y activa el entorno virtual:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   ```
   Verás que el prompt cambia mostrando `(.venv)` al inicio.

3. Instala las dependencias:
   ```bash
   pip install -r requirements.txt
   ```

Esto instalará todas las librerías necesarias para Streamlit, FastAPI, visualización y generación de PDF.

---

## Cómo iniciar el sistema

1. Asegúrate de que el entorno virtual está activado (debe aparecer `(.venv)` en el prompt).
   Si no está activado, ejecuta:
   ```bash
   source .venv/bin/activate
   ```

2. Ejecuta el script de inicio automático:
   ```bash
   ./start_all.sh
   ```
   Si ves un error de permisos, ejecuta antes:
   ```bash
   chmod +x start_all.sh
   ```

3. El script iniciará dos servidores:
   - **Streamlit** (interfaz visual): http://localhost:8501
   - **API FastAPI** (backend REST): http://localhost:8000

---

## Uso de la interfaz visual (Streamlit)

- Accede a http://localhost:8501 en tu navegador.
- Desde la interfaz puedes:
  - Configurar y ejecutar simulaciones.
  - Visualizar la red de drones sobre un mapa real.
  - Calcular rutas óptimas y ver el MST.
  - Registrar clientes y órdenes.
  - Analizar rutas y generar informes PDF.
  - Ver estadísticas generales del sistema.

---

## Uso de la API RESTful (FastAPI)

- Accede a http://localhost:8000/docs para ver y probar todos los endpoints disponibles (documentación interactiva Swagger).
- Puedes consumir la API desde cualquier cliente HTTP (Postman, navegador, código Python, etc).
- Endpoints principales:
  - `/clients/` : Lista de clientes
  - `/orders/` : Lista de órdenes
  - `/routes/` : Rutas y frecuencias
  - `/report/pdf` : Descargar informe PDF
  - `/info/reports/visits/clients` : Ranking de clientes más visitados
  - `/info/reports/visits/recharges` : Ranking de recargas
  - `/info/reports/visits/storages` : Ranking de almacenamientos
  - `/info/reports/summary` : Resumen general

---

## Notas
- Puedes modificar los parámetros de simulación desde la interfaz antes de iniciar.
- El sistema es escalable y permite exportar informes y consumir datos desde otros sistemas.
- Para detener los servicios, presiona Ctrl+C en la terminal donde ejecutaste el script.
- Si necesitas reiniciar los servicios, simplemente vuelve a ejecutar `./start_all.sh`.
- Si cierras la terminal, asegúrate de reactivar el entorno virtual con `source .venv/bin/activate` antes de ejecutar cualquier comando.
